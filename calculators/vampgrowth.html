
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Moriel Schottlender">
	<meta name="description" content="Calculators and graphs exploring the science of the Buffyverse">
	<!-- <link rel="icon" href="../../../../favicon.ico"> -->

    <title>Vampire Growth Calculator : Scientific explorations of the Buffyverse</title>

    <!-- Bootstrap core CSS -->
    <link href="../assets/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
	<link href="../assets/album.css" rel="stylesheet">
	<link href="../assets/calculators.css" rel="stylesheet">
  </head>

  <body>

	  <header>
        <div class="collapse bg-dark" id="navbarHeader">
          <div class="container">
            <div class="row">
              <div class="col-sm-8 col-md-7 py-4">
                <h4 class="text-white">About</h4>
                <p class="text-muted">Scientific explorations of the Buffyverse.</p>
  			  <p><a class="btn btn-primary" href="../index.html" role="button">More calculators</a></p>
  			  <p><a class="btn btn-secondary" href="../whatisthis.html" role="button">What is this?</a></p>
              </div>
              <div class="col-sm-4 offset-md-1 py-4">
                <h4 class="text-white">Information</h4>
                <ul class="list-unstyled">
  				<li><a href="http://github.com/mooeypoo/BuffyCalculator" target="_blank" class="text-white">The code</a></li>
                  <li><a href="http://twitter.com/mooeypoo" target="_blank" class="text-white">@mooeypoo</a></li>
  				<li><a href="http://moriel.smarterthanthat.com" target="_blank" class="text-white">My Blog</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="navbar navbar-dark bg-dark shadow-sm">
          <div class="container d-flex justify-content-between">
            <a href="index.html" class="navbar-brand d-flex align-items-center">
              <strong>BuffyCalculator</strong>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
        </div>
      </header>

    <main role="main">


      <div class="album py-5 bg-light">
        <div class="container">

			<h1 class="bc-title">Calculator: Vampire Growth<a class="btn btn-secondary" data-toggle="collapse" href="#collapsePreamble" role="button" aria-expanded="false" aria-controls="collapseExample">Preamble</a></h1>
			<div id="collapsePreamble" class="collapse">
				<div class="card card-body">
					If vampires create more vampires, how long would it take for them to take over the world?<br />
					If Buffy kills vampires, at what rate would she need to kill them to preserve the balance?<br />
					Would vampires go extinct? Would Buffy prevail? Does she even have a chance?!
				</div>
			</div>
			<div class="alert alert-info" role="alert">
				Play around with the numbers below to see how vampires (and buffy) fares. <br />You can check "Activate Buffy!" to include Buffy slaying vampires in the calculation.
			</div>

			<!-- form -->
			<div class="bc-calculator-buffy">
				<div class="custom-control form-control-lg custom-checkbox">
					<input type="checkbox" class="custom-control-input" id="vampgrowth-buffy">
					<label class="custom-control-label" for="vampgrowth-buffy">Activate Buffy!</label>
				</div>
				<div class="custom-control form-control-lg custom-checkbox">
					<input type="checkbox" class="custom-control-input" id="vampgrowth-hasimmigration">
					<label class="custom-control-label" for="vampgrowth-hasimmigration">Vampire immigration</label>
				</div>
			</div>
			<div class="bc-calculator-form">
				<div class="bc-calculator-form-line">If there are, right now, <input type="number" min="0" value="10" class="form-control" id="vampgrowth-initial"> vampires that can sire others.</div>
				<div class="bc-calculator-form-line">And each of them creates <input type="number" min="0" value="20" class="form-control" id="vampgrowth-growthfactor"> vampires per
					<select id="vampgrowth-growthfactor-timeframe" class="form-control">
						<option value="1">per day</option>
						<option value="7">per week</option>
						<option value="30">per month</option>
						<option value="365" selected>per year</option>
					</select>
				</div>
				<div class="bc-buffyactive-only bc-calculator-form-line">But Buffy slays <input type="number" min="0" value="2" class="form-control" id="vampgrowth-buffyfactor"> vampires per
					<select id="vampgrowth-buffyfactor-timeframe" class="form-control">
						<option value="1" selected>per day</option>
						<option value="7">per week</option>
						<option value="30">per month</option>
						<option value="365">per year</option>
					</select>
				</div>

				<div class="bc-calculator-form-line bc-calculator-immigration">
					And there are <input type="number" min="0" value="0" class="form-control" id="vampgrowth-immigration"> vampires immigrating to Sunnydale every
					<select id="vampgrowth-immigration-timeframe" class="form-control">
						<option value="1" selected>day</option>
						<option value="7">week</option>
						<option value="30">month</option>
						<option value="365">year</option>
					</select>
				</div>


				<div class="bc-calculator-form-line"><strong>Then,</strong> after
					<select id="vampgrowth-result-timeframe" class="form-control">
						<option value="7">one week</option>
						<option value="30">one month</option>
						<option value="182.5">six months</option>
						<option value="365" selected>one year</option>
						<option value="730">two years</option>
						<option value="1825">five years</option>
						<option value="3650">ten years</option>
					</select>
					<div class="vampgrowth-result"> there will be <span class="vampgrowth-result-num">x</span> vampires</div>
					<div class="alert alert-danger vampgrowth-result-beforetime" role="alert"></div>
				</div>
			</div>

			<div class="vampgrowth-result-vampilibrium">
				<div class="alert alert-warning" role="alert">
				  <strong>We have reached Vampilibrium!</strong><br />
				  <small>The case where there is an equilibrium between the number of vampires created, and the number destroyed.</small><br />
				  <em>The balance between good and evil is preserved!</em>
				</div>
			</div>


			<!-- Graph -->
			<canvas class="my-4 w-100" id="vampChart" width="900" height="380"></canvas>


			<a class="btn btn-info" data-toggle="collapse" class="bc-collapse-button" href="#collapseCalculation" role="button" aria-expanded="false" aria-controls="collapseCalculation">Show calculation</a>
			<div id="collapseCalculation" class="collapse">
				<div class="card card-body">
					The calculation is inspired by the growth equation:
					<p class='bc-equation'><strong>Final population of vampires = StartingPopulation * e<sup>GrowthFactor * Time</sup></strong></p>
					<p>However, we calculate the results per day, in incremental steps, so using the exponential function makes no sense. Instead, we break it apart:</p>
					<p>For each day, we check whether we reached the timeframe for either vampires siring others, buffy eliminates vampires, or vampires are immigrating in.</p>
					<p>If we reach the timeframe for either, we add or remove accordingly:</p>
					<ul>
						<li>For vampire growth, when the number of days is reached, we add a multiplication of the population growth: <strong>population = population + ( population * vampiresEachSires )</strong></li>
						<li>For Buffy's slaying, when the number of days is reached, we remove however many vampires she's slain: <strong>population = population - slainVampires</strong></li>
						<li>For vampire immigration, when the number of days is reaced, we add the number of arriving vampires: <strong>population = population + newVampires</strong></li>
					</ul>
					<p>The combined result, per day, is the stored and presented in the graph.</p>
				</div>
			</div>

			<!-- <a class="btn btn-info" data-toggle="collapse" href="#collapseChangeLog" role="button" aria-expanded="false" aria-controls="collapseChangeLog">Show updates and changes</a>
			<div id="collapseChangeLog" class="collapse"> -->
				<div class="card card-body">
					<h2>Thanks, Credits, and Corrections</h2>
					<p>It's super exciting to see the awesome reception for this tool!</p>
					<p>A number of people have pointed out some bugs and errors in the code or calculations that resulted in changes:</p>
					<ul>
						<li>The initial calculation was ovredoing the exponentiation, and the results appeared exaggerated. <a href="https://github.com/mooeypoo/buffycalculator/issues/2" target="_blank">This was fixed.</a><br /> Thanks a bunch to Lee Biernbaum for noticing!</li>
						<li>Inputs had a bad way of falling-back if there was no data, which basically made choosing 0 impossible. This was fixed.<br />Huge thank you to <a href="https://github.com/jeffreylovitz" target="_blank">Jeffrey Lovitz</a> for finding this and submitting a pull request!</li>
					</ul>
				</div>
			<!-- </div> -->

			<div class="alert alert-info" role="alert">
				<p>Did you spot an issue? A problem with the code, or the calculation? Do you have an idea I should add in to this calculator, or create any other calculators?<br />
				You can submit <a href="https://github.com/mooeypoo/buffycalculator/issues/new" target="_blank">an "issue" on Github</a>, <a href="http://moriel.smarterthanthat.com/contact/">contact me directly by sending me a note</a>, or say hi on twitter (<a href="http://www.twitter.com/mooeypoo" target="_blank">@mooeypoo</a>)</p>
			</div>


        </div>
      </div>

    </main>

    <footer class="text-muted">
      <div class="container">
        <p class="float-right">
          <a href="#">Back to top</a>
        </p>
        <p>BuffyCalculator &copy; Moriel Schottlender, license MIT. The entire site and code is <a href="http://github.com/mooeypoo/BuffyCalculator">available on github</a>; please consider contributing!</p>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../assets/jquery-slim.min.js"><\/script>')</script>
    <script src="../assets/popper.min.js"></script>
    <script src="../assets/bootstrap.min.js"></script>
	<script src="../assets/formurlator.oojs.min.js"></script>
	<script src="../assets/mathjs.min.js"></script>
	<script src="../assets/chart.min.js"></script>
	<script src="js/vampgrowth.init.js"></script>
  </body>
</html>
